# @foundcareers/redux-entity

[![build status](https://img.shields.io/npm/v/@foundcareers/redux-entity.svg)](https://www.npmjs.com/package/@foundcareers/redux-entity) [![build status](https://img.shields.io/travis/com/foundcareers/redux-entity.svg)](https://travis-ci.com/foundcareers/redux-entity) [![npm downloads](https://img.shields.io/npm/dt/@foundcareers/redux-entity.svg)](https://www.npmjs.com/package/@foundcareers/redux-entity) [![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)

This library contains a bunch of helpers to manage entity collections in a redux store. 

## Installation

Install via npm: 
`npm i -s @foundcareers/redux-entity` \\
Install via yarn: 
`yarn add @foundcareers/redux-entity`

## Default Collection State

Here's an example store that `@foundcareers/redux-entity` can work with, with the following collections: `todos` and `users`.

    {
      todos: {
        entities: {
          'be9a-a25d21033a20': {
            id: 'be9a-a25d21033a20',
            value: 'Wash clothes'
          },
          'be9a-423mfas5345sd': {
            id: 'be9a-423mfas5345sd',
            value: 'Write todo'
          },
          'be9a-a245gf2033a20': {
            id: 'be9a-a245gf2033a20',
            value: 'Grill salmon'
          },      
        },
        meta: {
          currentPage: 2,
          nextPage: 3,
          prevPage: 1,
          totalPages: 4,
          totalCount: 12,
        },
        selectedEntityId: 'be9a-a245gf2033a20',
      },
      users: {
        entities: {
          'be9a-a245gf2033a21': {
            id: 'be9a-a245gf2033a21',
            name: 'Bob cutlass'
          },
          'ke9a-a245gf2033a22': {
            id: 'ke9a-a245gf2033a22',
            name: 'Peter Noopter'
          },
        },
        meta: {
          currentPage: 2,
          nextPage: 1,
          prevPage: 1,
          totalPages: 2,
          totalCount: 3,
        },
        selectedEntityId: 'ke9a-a245gf2033a22',
      },
    }

# Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Factories](#factories)
    -   [createCollectionState](#createcollectionstate)
        -   [Parameters](#parameters)
-   [Selectors](#selectors)
    -   [getEntities](#getentities)
        -   [Parameters](#parameters-1)
    -   [getEntitiesArray](#getentitiesarray)
        -   [Parameters](#parameters-2)
    -   [getSelectedEntityId](#getselectedentityid)
        -   [Parameters](#parameters-3)
    -   [getMeta](#getmeta)
        -   [Parameters](#parameters-4)
    -   [getNextPage](#getnextpage)
        -   [Parameters](#parameters-5)
    -   [getPrevPage](#getprevpage)
        -   [Parameters](#parameters-6)
-   [Reducers](#reducers)
    -   [addEntity](#addentity)
        -   [Parameters](#parameters-7)
    -   [addEntities](#addentities)
        -   [Parameters](#parameters-8)
    -   [removeEntity](#removeentity)
        -   [Parameters](#parameters-9)
    -   [removeEntities](#removeentities)
        -   [Parameters](#parameters-10)
    -   [removeSelectedEntity](#removeselectedentity)
        -   [Parameters](#parameters-11)
    -   [addMeta](#addmeta)
        -   [Parameters](#parameters-12)
    -   [select](#select)
        -   [Parameters](#parameters-13)
    -   [reset](#reset)
        -   [Parameters](#parameters-14)
    -   [createReducer](#createreducer)
        -   [Parameters](#parameters-15)

## Factories

### createCollectionState

Collection state Creator

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object that's spread into the collection state.
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Configuration object. (optional, default `{}`)
    -   `options.useCursor` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Set to `true` to use cursor meta.

## Selectors

### getEntities

Get entities from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

### getEntitiesArray

Get a sorted array of entities from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `compareFunction` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Comparator used to compare two objects.

### getSelectedEntityId

Get the selected entity id from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

### getMeta

Get meta from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

### getNextPage

Get next page from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

### getPrevPage

Get previous page from a collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

## Reducers

### addEntity

Adds an entity to the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The entity object you'd like to add. Must contain an `id` attribute

### addEntities

Adds entities to the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The collection of entities you would

### removeEntity

Removes an entity from the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `id` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Entity's id you'd like to remove from the collection state.

### removeEntities

Removes entities from the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `ids` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** An array of entity ids.

### removeSelectedEntity

Removes the selected entity.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.

### addMeta

Adds meta to the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The meta object.

### select

Selects an entity in the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Entity Id that's being selected.

### reset

Resets the collection state.

#### Parameters

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Current Collection state.
-   `initialState` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Initial Collection state (refer to `createCollectionState`).

### createReducer

Helper function used to create a reducer function.

#### Parameters

-   `initialState` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Collection state.
-   `actionTypes` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object containing the reducer's default action types.
-   `handlers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object containing custom reducer actions. (optional, default `{}`)
